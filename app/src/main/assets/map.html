<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Карта ЮРГПУ (НПИ)</title>
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    .map-container {
      position: relative;
      width: 100%;
      height: auto;
    }

    .map-container img {
      width: 100%;
      height: auto;
      display: block;
    }

    .area {
      position: absolute;
      border: 2px solid rgba(255, 0, 0, 0.3);
      cursor: pointer;
    }

    .svg-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }

    .route-line {
      stroke: red;
      stroke-width: 4;
      stroke-linecap: round;
      stroke-dasharray: 1000;
      stroke-dashoffset: 1000;
      animation: drawRoute 1s ease-out forwards;
      fill: none;
    }

    @keyframes drawRoute {
      to {
        stroke-dashoffset: 0;
      }
    }

    /* Координаты зданий */
    #main-building {
      top: 61.5%;
      left: 42%;
      width: 21%;
      height: 15%;
    }

    #him {
      top: 44%;
      left: 24%;
      width: 9.5%;
      height: 15.9%;
    }

    #rt {
      top: 63.5%;
      left: 23.5%;
      width: 10.5%;
      height: 15%;
    }

    #gg {
      top: 23.2%;
      left: 24%;
      width: 7.6%;
      height: 11.2%;
    }

    #ubk {
      top: 20%;
      left: 40.6%;
      width: 24%;
      height: 8%;
    }

    #en {
      top: 29.5%;
      left: 40.6%;
      width: 24%;
      height: 11.7%;
    }

    #lk {
      top: 20%;
      left: 67.6%;
      width: 17%;
      height: 3.7%;
    }
  </style>
</head>
<body>
<div class="map-container">
  <img src="karta.jpg" alt="Карта ЮРГПУ НПИ">
  <svg id="route-layer" class="svg-overlay">
    <!-- Удалили маркер стрелки -->
  </svg>

  <!-- Кликабельные зоны -->
  <div id="main-building" class="area" onclick="onAreaClick('Главный корпус')"></div>
  <div id="him" class="area" onclick="onAreaClick('Технологический корпус')"></div>
  <div id="rt" class="area" onclick="onAreaClick('Робототехнический корпус')"></div>
  <div id="gg" class="area" onclick="onAreaClick('Горно-геологический корпус')"></div>
  <div id="ubk" class="area" onclick="onAreaClick('Учебно-библиотечный корпус')"></div>
  <div id="en" class="area" onclick="onAreaClick('Энергетический корпус')"></div>
  <div id="lk" class="area" onclick="onAreaClick('Лабораторный корпус')"></div>
</div>

<script>
  let pointA = null;
  let pointB = null;

  function onAreaClick(name) {
    if (!pointA) {
      pointA = name;
      clearRoute();
      showToast("Точка A: " + name);
    } else if (!pointB) {
      pointB = name;
      showToast("Точка B: " + name);
      drawRoute(pointA, pointB);
    } else {
      clearRoute();
      pointA = name;
      pointB = null;
      showToast("Новая точка A: " + name);
    }
  }

  function showToast(msg) {
    if (typeof Android !== "undefined" && Android.showToast) {
      Android.showToast(msg);
    } else {
      console.log(msg);
    }
  }

  function clearRoute() {
    const svg = document.getElementById("route-layer");
    svg.innerHTML = ""; // Удаляем всё, включая предыдущие маршруты
  }

  function drawRoute(fromName, toName) {
    const svg = document.getElementById("route-layer");
    const pathPoints = getPathPoints(fromName, toName);
    if (!pathPoints || pathPoints.length < 2) return;

    const bbox = svg.getBoundingClientRect();
    const width = bbox.width;
    const height = bbox.height;

    const pxPoints = pathPoints.map(p => ({
      x: (p.x / 100) * width,
      y: (p.y / 100) * height
    }));

    const polyline = document.createElementNS("http://www.w3.org/2000/svg", "polyline");
    const pointsAttr = pxPoints.map(p => `${p.x},${p.y}`).join(" ");
    polyline.setAttribute("points", pointsAttr);
    polyline.setAttribute("class", "route-line");

    svg.appendChild(polyline);
  }

  function getPathPoints(from, to) {

  <!--------------Главный корпус-------------->
  <!--------------ГЛ -> РТ-------------------->

    if ((from === "Главный корпус" && to === "Робототехнический корпус") ||
        (from === "Робототехнический корпус" && to === "Главный корпус")) {
      return [
        { x: 35, y: 72 },
        { x: 37, y: 72 },
        { x: 37, y: 60 },
        { x: 52, y: 60 },
        { x: 52, y: 62 }
      ];
    }

  <!--------------ГЛ -> ТК-------------------->
    if ((from === "Главный корпус" && to === "Технологический корпус") ||
        (from === "Технологический корпус" && to === "Главный корпус")) {
      return [
        { x: 34 , y: 55 },
        { x: 37, y: 55 },
        { x: 37, y: 60 },
        { x: 52, y: 60 },
        { x: 52, y: 62 }
      ];
    }

    <!--------------ГЛ -> ГГ-------------------->
    if ((from === "Главный корпус" && to === "Горно-геологический корпус") ||
        (from === "Горно-геологический корпус" && to === "Главный корпус")) {
      return [
        { x: 31 , y: 34 },
        { x: 31 , y: 35 },
        { x: 36, y: 35 },
        { x: 36, y: 60 },
        { x: 52, y: 60 },
        { x: 52, y: 62 }
      ];
    }

    <!--------------ГЛ -> ЭН-------------------->
    if ((from === "Главный корпус" && to === "Энергетический корпус") ||
        (from === "Энергетический корпус" && to === "Главный корпус")) {
      return [
        { x: 52 , y: 41.5 },
        { x: 52 , y: 44 },
        { x: 37, y: 44 },
        { x: 37, y: 60 },
        { x: 52, y: 60 },
        { x: 52, y: 62 }
      ];
    }

    <!--------------ГЛ -> УБК-------------------->
    if ((from === "Главный корпус" && to === "Учебно-библиотечный корпус") ||
        (from === "Учебно-библиотечный корпус" && to === "Главный корпус")) {
      return [
        { x: 64.8, y: 27 },
        { x: 66.5, y: 27 },
        { x: 66.5, y: 60 },
        { x: 52, y: 60 },
        { x: 52, y: 62 }
      ];
    }

    <!--------------ГЛ -> ЛК-------------------->
    if ((from === "Главный корпус" && to === "Лабораторный корпус") ||
        (from === "Лабораторный корпус" && to === "Главный корпус")) {
      return [
        { x: 67.4, y: 21.5 },
        { x: 66.5, y: 21.5 },
        { x: 66.5, y: 60 },
        { x: 52, y: 60 },
        { x: 52, y: 62 }
      ];
    }
    <!--------Робототехнический корпус-------------->
    <!--------------РТ -> ТФ-------------------->
    if ((from === "Робототехнический корпус" && to === "Технологический корпус") ||
        (from === "Технологический корпус" && to === "Робототехнический корпус")) {
      return [
        { x: 34, y: 72 },
        { x: 38, y: 72 },
        { x: 38, y: 51 },
        { x: 34, y: 51 }
      ];
    }

    <!--------------РТ -> ГГ-------------------->
    if ((from === "Робототехнический корпус" && to === "Горно-геологический корпус") ||
        (from === "Горно-геологический корпус" && to === "Робототехнический корпус")) {
      return [
        { x: 32, y: 72 },
        { x: 36, y: 72 },
        { x: 36, y: 35 },
        { x: 29, y: 35 },
        { x: 29, y: 34.5 }
      ];
    }

    <!--------------РТ -> ЭН-------------------->
    if ((from === "Робототехнический корпус" && to === "Энергетический корпус") ||
        (from === "Энергетический корпус" && to === "Робототехнический корпус")) {
      return [
        { x: 32, y: 72 },
        { x: 36, y: 72 },
        { x: 36, y: 43.5 },
        { x: 53, y: 43.5 },
        { x: 53, y: 41.6 }
      ];
    }

    <!--------------РТ -> УБК-------------------->
    if ((from === "Робототехнический корпус" && to === "Учебно-библиотечный корпус") ||
        (from === "Учебно-библиотечный корпус" && to === "Робототехнический корпус")) {
      return [
        { x: 32, y: 72 },
        { x: 36, y: 72 },
        { x: 36, y: 28.9 },
        { x: 47, y: 28.9 },
        { x: 47, y: 25.6 }
      ];
    }

    <!--------------РТ -> ЛК-------------------->
    if ((from === "Робототехнический корпус" && to === "Лабораторный корпус") ||
        (from === "Лабораторный корпус" && to === "Робототехнический корпус")) {
      return [
        { x: 32, y: 72 },
        { x: 36, y: 72 },
        { x: 36, y: 28.9 },
        { x: 75, y: 28.9 },
        { x: 75, y: 23.6 }
      ];
    }

    <!--------Технологический корпус-------------->
    <!--------------ТК -> ЛК-------------------->
    if ((from === "Технологический корпус" && to === "Лабораторный корпус") ||
        (from === "Лабораторный корпус" && to === "Технологический корпус")) {
      return [
        { x: 34, y: 50 },
        { x: 36, y: 50 },
        { x: 36, y: 28.9 },
        { x: 75, y: 28.9 },
        { x: 75, y: 23.6 }
      ];
    }

    <!--------------ТК -> ГГ-------------------->
    if ((from === "Технологический корпус" && to === "Горно-геологический корпус") ||
        (from === "Горно-геологический корпус" && to === "Технологический корпус")) {
      return [
        { x: 34, y: 51 },
        { x: 36, y: 51 },
        { x: 36, y: 35 },
        { x: 28, y: 35 },
        { x: 28, y: 34.5 }
      ];
    }

    <!--------------ТК -> ЭН-------------------->
    if ((from === "Технологический корпус" && to === "Энергетический корпус") ||
        (from === "Энергетический корпус" && to === "Технологический корпус")) {
      return [
        { x: 34, y: 51 },
        { x: 36, y: 51 },
        { x: 36, y: 43 },
        { x: 49, y: 43 },
        { x: 49, y: 41.5 }
      ];
    }

    <!--------------ТК -> УБК-------------------->
    if ((from === "Технологический корпус" && to === "Учебно-библиотечный корпус") ||
        (from === "Учебно-библиотечный корпус" && to === "Технологический корпус")) {
      return [
        { x: 34, y: 51 },
        { x: 36, y: 51 },
        { x: 36, y: 29 },
        { x: 46, y: 29 },
        { x: 46, y: 25 }
      ];
    }

    <!--------Технологический корпус-------------->
    <!--------------ТК -> УБК-------------------->
    if ((from === "Технологический корпус" && to === "Учебно-библиотечный корпус") ||
        (from === "Учебно-библиотечный корпус" && to === "Технологический корпус")) {
      return [
        { x: 34, y: 51 },
        { x: 36, y: 51 },
        { x: 36, y: 29 },
        { x: 46, y: 29 },
        { x: 46, y: 25 }
      ];
    }

    <!--------Горно-геологический корпус-------------->
    <!--------------ГГ -> ЭН--------------------->
    if ((from === "Горно-геологический корпус" && to === "Энергетический корпус") ||
        (from === "Энергетический корпус" && to === "Горно-геологический корпус")) {
      return [
        { x: 30, y: 34.5 },
        { x: 30, y: 35 },
        { x: 36, y: 35 },
        { x: 36, y: 42 },
        { x: 53, y: 42 },
        { x: 53, y: 41 }
      ];
    }

    <!--------------ГГ -> УБК--------------------->
    if ((from === "Горно-геологический корпус" && to === "Учебно-библиотечный корпус") ||
        (from === "Учебно-библиотечный корпус" && to === "Горно-геологический корпус")) {
      return [
        { x: 30, y: 34.5 },
        { x: 30, y: 35 },
        { x: 36, y: 35 },
        { x: 36, y: 29 },
        { x: 46, y: 29 },
        { x: 46, y: 25 }
      ];
    }

    <!--------------ГГ -> ЛК--------------------->
    if ((from === "Горно-геологический корпус" && to === "Лабораторный корпус") ||
        (from === "Лабораторный корпус" && to === "Горно-геологический корпус")) {
      return [
        { x: 30, y: 34.5 },
        { x: 30, y: 35 },
        { x: 36, y: 35 },
        { x: 36, y: 43 },
        { x: 66, y: 43 },
        { x: 66, y: 29.5 },
        { x: 75, y: 29.5 },
        { x: 75, y: 23.5 }
      ];
    }

    <!--------Учебно-библиотечный корпус-------------->
    <!--------------УБУ -> ЭН--------------------->
    if ((from === "Учебно-библиотечный корпус" && to === "Энергетический корпус") ||
        (from === "Энергетический корпус" && to === "Учебно-библиотечный корпус")) {
      return [
        { x: 46, y: 25 },
        { x: 46, y: 29 },
        { x: 36, y: 29 },
        { x: 36, y: 42 },
        { x: 53, y: 42 },
        { x: 53, y: 41 }

      ];
    }

    <!--------Учебно-библиотечный корпус-------------->
    <!--------------УБУ -> ЛК--------------------->
    if ((from === "Учебно-библиотечный корпус" && to === "Лабораторный корпус") ||
        (from === "Лабораторный корпус" && to === "Учебно-библиотечный корпус")) {
      return [
        { x: 46, y: 25 },
        { x: 46, y: 29 },
        { x: 66, y: 29 },
        { x: 75, y: 29 },
        { x: 75, y: 23.5 }
      ];
    }

    <!--------Лабораторный корпус-------------->
    <!--------------ЛК -> ЭН--------------------->
    if ((from === "Энергетический корпус" && to === "Лабораторный корпус") ||
        (from === "Лабораторный корпус" && to === "Энергетический корпус")) {
      return [
        { x: 53, y: 41 },
        { x: 53, y: 43 },
        { x: 66, y: 43 },
        { x: 66, y: 29.5 },
        { x: 75, y: 29.5 },
        { x: 75, y: 23.5 }
      ];
    }

    return null;
  }
</script>
</body>
</html>
